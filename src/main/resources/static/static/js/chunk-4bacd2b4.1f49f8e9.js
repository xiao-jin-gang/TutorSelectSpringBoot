(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4bacd2b4"],{2189:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return o})),a.d(e,"e",(function(){return l})),a.d(e,"f",(function(){return u})),a.d(e,"g",(function(){return c})),a.d(e,"d",(function(){return p}));a("d3b7"),a("3ca3"),a("ddb0"),a("9861"),a("99af");var n=a("b775"),r=a("99b1");function i(t,e,a){var i=new URLSearchParams;return i.append("organizationId",t),i.append("applyStatuss",e),i.append("pageNumber",a),Object(n["a"])({url:"".concat(r["a"],"/admin/tutor-inspect/getInit"),method:"post",data:i})}function s(t,e){return Object(n["a"])({url:"".concat(r["a"],"/admin/tutor-inspect/search/").concat(e),method:"post",data:t})}function o(){return Object(n["a"])({url:"/admin/apply-type/getApplyType",method:"get"})}function l(t){return Object(n["a"])({url:"/admin/update-status/update",method:"post",data:t})}function u(t){return Object(n["a"])({url:"/admin/update-status/updateSfh",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/admin/update-status/updateXy",method:"post",data:t})}function p(t){return Object(n["a"])({url:"/admin/update-status/updateSocial",method:"post",data:t})}},"6fa2":function(t,e,a){"use strict";a.d(e,"d",(function(){return i})),a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return o})),a.d(e,"b",(function(){return l}));a("99af");var n=a("a78e"),r=a.n(n);function i(t,e,a,n,r){t.$router.push("/applyDetails/".concat(e,"/").concat(a,"/").concat(n,"/").concat(r))}function s(t){var e=new Date(t);return new Date(e.getTime()+e.getTimezoneOffset()/60*3600*1e3)}function o(t){var e=new Date(t);return new Date(e.getTime()+3600*(e.getTimezoneOffset()/60+24)*1e3)}function l(){if(null!==r.a.get("organizationId"))return r.a.get("organizationId");console.log("error-organizationId is null")}},"8d63":function(t,e,a){"use strict";a.d(e,"a",(function(){return r})),a.d(e,"e",(function(){return i})),a.d(e,"f",(function(){return s})),a.d(e,"b",(function(){return o})),a.d(e,"d",(function(){return l})),a.d(e,"c",(function(){return u}));var n=a("b775");function r(t){return Object(n["a"])({url:"/admin/export/cs",method:"post",data:t,responseType:"blob"})}function i(t){return Object(n["a"])({url:"/admin/export/sfh",method:"post",data:t,responseType:"blob"})}function s(t){return Object(n["a"])({url:"/admin/export/sxyfh",method:"post",data:t,responseType:"blob"})}function o(t){return Object(n["a"])({url:"/admin/export/finalOrg",method:"post",data:t,responseType:"blob"})}function l(t){return Object(n["a"])({url:"/admin/export/qualification",method:"post",data:t,responseType:"blob"})}function u(t){return Object(n["a"])({url:"/admin/export/finalListGraduate",method:"post",data:t,responseType:"blob"})}},cde1:function(t,e,a){"use strict";a.r(e);var n,r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"queryForm",attrs:{"label-width":"70px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"工号"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入工号",clearable:"",size:"small"},model:{value:t.queryParams.userId,callback:function(e){t.$set(t.queryParams,"userId",e)},expression:"queryParams.userId"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入姓名",clearable:"",size:"small"},model:{value:t.queryParams.userName,callback:function(e){t.$set(t.queryParams,"userName",e)},expression:"queryParams.userName"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"申请类别"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",clearable:"",size:"small"},model:{value:t.queryParams.applyType,callback:function(e){t.$set(t.queryParams,"applyType",e)},expression:"queryParams.applyType"}},t._l(t.applyTypeList,(function(t){return a("el-option",{key:t.applyTypeId,attrs:{label:t.applyName,value:t.applyTypeId}})})),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"审核状态"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",clearable:"",size:"small"},on:{change:t.changeApplyStatus},model:{value:t.queryParams.applyStatus,callback:function(e){t.$set(t.queryParams,"applyStatus",e)},expression:"queryParams.applyStatus"}},t._l(t.statusOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:2,offset:20}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:t.search}},[t._v("搜索")])],1),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{icon:"el-icon-refresh",size:"small"},on:{click:function(e){return t.resetQuery(t.queryParams)}}},[t._v("重置")])],1)],1)],1),a("div",{staticStyle:{margin:"10px 0","border-bottom":"1px solid #dcdfe6","padding-bottom":"10px"}},[a("el-button",{attrs:{type:"success",plain:"",icon:"el-icon-success",size:"small",disabled:t.single},on:{click:function(e){return t.passFun()}}},[t._v("学院分会通过 ")]),a("el-button",{attrs:{type:"danger",plain:"",icon:"el-icon-error",size:"small",disabled:t.multiple},on:{click:function(e){return t.unPassFun()}}},[t._v("学院分会不通过 ")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.tutorList},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center"}}),a("el-table-column",{attrs:{label:"工号",align:"center",prop:"tutorId"}}),a("el-table-column",{attrs:{label:"姓名",align:"center",prop:"name"}}),a("el-table-column",{attrs:{label:"所在单位（院系）",align:"center",prop:"organizationName"}}),a("el-table-column",{attrs:{label:"申请学科或类别代码",align:"center",prop:"applySubject"}}),a("el-table-column",{attrs:{label:"申请类别",align:"center",prop:"applyName"}}),a("el-table-column",{attrs:{label:"职称",align:"center",prop:"title"}}),a("el-table-column",{attrs:{label:"审核状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[11===e.row.status?a("el-tag",{attrs:{type:"info"}},[t._v(t._s(e.row.inspectDescribe))]):23===e.row.status?a("el-tag",{attrs:{type:"success"}},[t._v(" "+t._s(e.row.inspectDescribe))]):24===e.row.status?a("el-tag",{attrs:{type:"danger"}},[t._v(" "+t._s(e.row.inspectDescribe))]):t._e()]}}])}),a("el-table-column",{attrs:{label:"详情",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.toDetails(e.row.applyId,e.row.applyTypeId,e.row.tutorId)}}},[t._v("查 看 ")])]}}])}),a("el-table-column",{attrs:{label:"备注",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.commitFun(e.row)}}},[t._v("添加备注")])]}}])})],1),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-pagination",{staticStyle:{margin:"10px 0"},attrs:{"current-page":t.queryParams.pageNum,"page-size":t.queryParams.pageSize,layout:"total, prev, pager, next",total:t.totalData},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),a("el-row",[a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{plain:"",icon:"el-icon-download",size:"small",loading:t.exportLoading},on:{click:function(e){return t.exportFun()}}},[t._v("导出excel ")])],1),a("el-col",{attrs:{span:2,offset:20}},[a("el-button",{attrs:{type:"success",plain:"",size:"small",icon:"el-icon-success",loading:t.exportLoading},on:{click:function(e){return t.submitFun()}}},[t._v("提交 ")])],1)],1),t._m(0),a("el-dialog",{attrs:{title:"录入分会意见备注(可以为空)",visible:t.dialogVisible,width:"20%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-input",{attrs:{type:"textarea",autocomplete:"off"},model:{value:t.returnCommit,callback:function(e){t.returnCommit=e},expression:"returnCommit"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){return t.cancel()}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.returnFun()}}},[t._v("确 定")])],1)],1)],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticStyle:{margin:"10px 0"}},[t._v(" 注意：导出上表所有审核状态为"),a("span",{staticStyle:{color:"#f56c6c"}},[t._v("学院分会通过")]),t._v("的记录 ")])}],s=a("ade3"),o=a("1da1"),l=(a("96cf"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),a("2189")),u=a("6fa2"),c=a("a78e"),p=a.n(c),m=a("8d63"),d={data:function(){return{returnCommit:"",dialogVisible:!1,dialogVisiblePass:!1,loading:!0,exportLoading:!1,single:!0,multiple:!0,showSearch:!0,totalData:0,secretaryInitList:[],applyTypeList:[],multipleSelection:[],currentSelection:[],commitArrays:[],pageNumber:1,queryParams:{userId:"",userName:"",organization:"",organizationName:"",applyType:"",subjectName:"",applyStatus:"",applyStatuss:[],subjectType:""},queryParamCopy:{},statusOptions:[{value:11,label:"同意上分会"},{value:23,label:"学院分会通过"},{value:24,label:"学院分会不通过"}],updateList:[],tutorList:[]}},created:function(){this.getSecretaryInit(),this.getApplyTypeList()},methods:(n={getOrganizationId:function(){if(null!==p.a.get("organizationId"))return p.a.get("organizationId");console.log("error-organizationId is null")},getOrganizationName:function(){if(null!==p.a.get("organizationName"))return p.a.get("organizationName");console.log("error-organizationName is null")},dataOption:function(t){this.loading=!0;var e=["23"];this.queryParams.organization=this.getOrganizationId(),this.queryParams.organizationName=this.getOrganizationName(),null==this.queryParams.applyStatus||""==this.queryParams.applyStatus?(this.queryParamCopy=JSON.parse(JSON.stringify(this.queryParams)),this.queryParamCopy.applyStatuss=e,t(this.queryParamCopy)):t(this.queryParams)},exportFun:function(){this.dataOption(this.exportExcel)},exportExcel:function(t){var e=this,a=new Date,n=a.getFullYear();Object(m["f"])(t).then((function(t){var a=new Blob([t],{type:"application/vnd.ms-excel"}),r=window.URL.createObjectURL(a),i=document.createElement("a");i.download="西北大学"+n+"年"+e.getOrganizationName()+"学位评定分委员会审议汇总表.xlsx",i.href=r,i.click()})),this.loading=!1},getApplyTypeList:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:Object(l["a"])().then((function(e){t.applyTypeList=e.data}));case 1:case"end":return e.stop()}}),e)})))()},getSecretaryInit:function(){var t=this;this.loading=!0;var e=["11","23","24"],a=this.getOrganizationId();Object(l["b"])(a,e,this.pageNumber).then((function(e){t.tutorList=e.data.data,t.totalData=e.data.total,t.loading=!1})),this.resetQuery()},toDetails:function(t,e,a){Object(u["d"])(this,t,e,a)},search:function(){var t=this;this.pageNumber=1,""===this.queryParams.userId&&""===this.queryParams.applyStatus&&""===this.queryParams.userName&&""===this.queryParams.organization&&""===this.queryParams.applyType&&""===this.queryParams.subjectName&&""===this.queryParams.subjectType?this.getSecretaryInit():(""===this.queryParams.applyStatus&&(this.queryParams.applyStatuss=["11","23","24"]),this.queryParams.organization=this.getOrganizationId(),Object(l["c"])(this.queryParams,this.pageNumber).then((function(e){t.tutorList=e.data.data,t.totalData=e.data.total,t.loading=!1})).catch((function(t){throw t})))},changeApplyStatus:function(){this.queryParams.applyStatuss=[]},resetQuery:function(){this.queryParams.userId="",this.queryParams.userName="",this.queryParams.applyType="",this.queryParams.applyStatus="",this.queryParams.applyStatuss=[]},passFun:function(){this.check(23,"unCommit")},unPassFun:function(){this.check(24,"unCommit")},commitFun:function(t){this.commitArrays.length=0,this.dialogVisible=!0,this.returnCommit=t.commitYxXy;var e={id_1:0,status_1:0,commit_1:""};e.id_1=t.applyId,e.status_1=t.status,e.commit_1=t.commitYxXy,this.commitArrays.push(e)},returnFun:function(){this.commitArrays[0].commit_1=this.returnCommit,this.updateStatusFun(this.commitArrays,!1),this.dialogVisible=!1},updateTutorListDataCommit:function(t){for(var e=0;e<this.tutorList.length;e++)if(t===this.tutorList[e].applyId){this.tutorList[e].commitYxXy=this.returnCommit;break}for(var a=0;a<this.updateList.length;a++)if(t===this.updateList[a].id_1){this.updateList[a].commit_1=this.returnCommit;break}},cancel:function(){this.dialogVisible=!1,this.returnCommit=null},check:function(t){if("submit"===t)for(var e=0;e<this.updateList.length;e++)this.updateList[e].status_1=this.updateList[e].status_1+2;else for(var a=0;a<this.updateList.length;a++)this.updateList[a].status_1=t;this.updateStatusFun(this.updateList,!0)},updateStatusFun:function(t,e){var a=this;Object(l["g"])(t).then((function(t){2e4===t.code&&a.$message.success("操作成功!"),e?a.getSecretaryInit():a.updateTutorListDataCommit(a.commitArrays[0].id_1)}))},submitFun:function(){var t=this;this.$confirm("确认提交吗？").then((function(e){for(var a=!0,n=0;n<t.updateList.length;n++)11===t.updateList[n].status_1&&(a=!1);0===t.updateList.length?t.$message.warning("未选择数据，请先进行选择！"):a?(t.check("submit"),t.getSecretaryInit()):t.$message.warning("有待审核的数据，请先进行审核！"),t.dialogVisiblePass=!1})).catch((function(){console.log("cancel")}))},handleSelectionChange:function(t){t.length>0?(this.single=!1,this.multiple=!1):(this.single=!0,this.multiple=!0),this.multipleSelection=t,this.updateObject(this.multipleSelection)},updateObject:function(t){this.updateList=[];for(var e=0;e<t.length;e++){var a={id_1:0,status_1:0,commit_1:""};a.id_1=t[e].applyId,a.status_1=t[e].status,a.commit_1=t[e].commitYxXy,this.updateList.push(a)}}},Object(s["a"])(n,"cancel",(function(){this.dialogVisible=!1,this.returnCommit=null})),Object(s["a"])(n,"handleSizeChange",(function(t){})),Object(s["a"])(n,"handleCurrentChange",(function(t){this.pageNumber=t,this.getSecretaryInit()})),n)},h=d,y=a("2877"),f=Object(y["a"])(h,r,i,!1,null,"212780f9",null);e["default"]=f.exports}}]);