(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-58a962ac"],{"00a8":function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Detail",{attrs:{science:2}})},r=[],o=a("9267"),c={components:{Detail:o["a"]},data:function(){return{}}},n=c,s=a("2877"),i=Object(s["a"])(n,l,r,!1,null,"64f4cfff",null);e["default"]=i.exports},9267:function(t,e,a){"use strict";var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app-container"}},[a("br"),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:21}},[a("el-card",{staticClass:"box-card"},[a("el-descriptions",{staticClass:"margin-top",attrs:{title:"教师信息",column:4,border:""}},[a("el-descriptions-item",[a("template",{slot:"label"},[t._v(" 工号 ")]),t._v(" "+t._s(t.tutorId)+" ")],2),a("el-descriptions-item",[a("template",{slot:"label"},[t._v(" 姓名 ")]),t._v(" "+t._s(t.name)+" ")],2),a("el-descriptions-item",[a("template",{slot:"label"},[t._v(" 院系 ")]),t._v(" "+t._s(t.organizationName)+" ")],2)],1)],1)],1)],1),a("br"),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:21}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("学术论文")])]),a("el-table",{staticStyle:{width:"100%",margin:"20px auto"},attrs:{data:t.paperList,border:""}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50"}}),a("el-table-column",{attrs:{prop:"paperName",label:"论文名称"}}),a("el-table-column",{attrs:{prop:"paperPublicationTime",label:"发表时间"}}),a("el-table-column",{attrs:{prop:"firstAuthorName",label:"第一作者"}}),a("el-table-column",{attrs:{prop:"communicationAuthorName",label:"通讯作者"}}),a("el-table-column",{attrs:{prop:"journalName",label:"期刊名称"}}),a("el-table-column",{attrs:{prop:"journalCategory",label:"期刊类别"}}),a("el-table-column",{attrs:{prop:"sciPart",label:"分区"}}),a("el-table-column",{attrs:{prop:"journalLevel",label:"期刊等级"}}),a("el-table-column",{attrs:{prop:"impactFactors",label:"影响因子"}}),a("el-table-column",{attrs:{label:"证明材料",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{attrs:{href:e.row.paperProveMaterials}},[t._v("下载文件")])]}}])}),a("el-table-column",{attrs:{label:"成果认定",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[null===e.row.col1||""===e.row.col1?a("el-tag",{attrs:{type:"info"}},[t._v(" 待审核 ")]):"通过"===e.row.col1?a("el-tag",{attrs:{type:"success"}},[t._v(" 通过 ")]):a("el-tag",{attrs:{type:"danger"}},[t._v(" 不通过 ")])]}}])}),a("el-table-column",{attrs:{label:"备注",align:"center",prop:"col2"}}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"160","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){return 1!==e.row.tutorId?[a("el-button",{attrs:{type:"success",icon:"el-icon-success",size:"mini",plain:""},on:{click:function(a){return t.checkIn(e.row.paperId,e.$index,1)}}},[t._v("通过 ")]),a("el-button",{attrs:{type:"danger",plain:"",icon:"el-icon-error",size:"mini"},on:{click:function(a){return t.checkOut(e.row.paperId,e.$index,1,e.row.col2)}}},[t._v("驳回 ")])]:void 0}}],null,!0)})],1)],1)],1)],1),a("br"),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:21}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("科研项目")])]),a("el-table",{staticStyle:{width:"100%",margin:"20px auto"},attrs:{data:t.projectList,border:""}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50"}}),a("el-table-column",{attrs:{prop:"projectName",label:"项目名称"}}),a("el-table-column",{attrs:{prop:"approvalNumber",label:"批准号"}}),a("el-table-column",{attrs:{prop:"projectChargeName",label:"负责人姓名",width:"100"}}),a("el-table-column",{attrs:{prop:"projectStartTime",label:"开始日期"}}),a("el-table-column",{attrs:{prop:"projectEndTime",label:"结束日期"}}),a("el-table-column",{attrs:{prop:"projectCategory",label:"项目分类"}}),a("el-table-column",{attrs:{prop:"projectTotalPrice",label:"总经费（万元）",width:"120"}}),a("el-table-column",{attrs:{prop:"projectLevel",label:"项目级别"}}),a("el-table-column",{attrs:{label:"证明材料",align:"center",prop:"projectProveMaterials"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{attrs:{href:e.row.projectProveMaterials}},[t._v("下载文件")])]}}])}),a("el-table-column",{attrs:{label:"成果认定",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[null===e.row.col1||""===e.row.col1?a("el-tag",{attrs:{type:"info"}},[t._v(" 待审核 ")]):"通过"===e.row.col1?a("el-tag",{attrs:{type:"success"}},[t._v(" 通过 ")]):a("el-tag",{attrs:{type:"danger"}},[t._v(" 不通过 ")])]}}])}),a("el-table-column",{attrs:{label:"备注",align:"center",prop:"col2"}}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"160","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){return 1!==e.row.tutorId?[a("el-button",{attrs:{type:"success",icon:"el-icon-success",size:"mini",plain:""},on:{click:function(a){return t.checkIn(e.row.projectId,e.$index,2)}}},[t._v("通过 ")]),a("el-button",{attrs:{type:"danger",plain:"",icon:"el-icon-error",size:"mini"},on:{click:function(a){return t.checkOut(e.row.projectId,e.$index,2,e.row.col2)}}},[t._v("驳回 ")])]:void 0}}],null,!0)})],1)],1)],1)],1),a("br"),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:21}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("教材或学术著作")])]),a("el-table",{staticStyle:{width:"100%",margin:"20px auto"},attrs:{data:t.workList,border:""}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50"}}),a("el-table-column",{attrs:{prop:"worksName",label:"著作名称"}}),a("el-table-column",{attrs:{prop:"worksNumber",label:"著作编号"}}),a("el-table-column",{attrs:{prop:"worksPublicationTime",label:"出版日期"}}),a("el-table-column",{attrs:{prop:"worksPublicationUnit",label:"出版单位"}}),a("el-table-column",{attrs:{prop:"totalWords",label:"完成字数（万字）"}}),a("el-table-column",{attrs:{prop:"authorName",label:"作者姓名"}}),a("el-table-column",{attrs:{label:"证明材料",align:"center",prop:"worksProveMaterials"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{attrs:{href:e.row.worksProveMaterials}},[t._v("下载文件")])]}}])}),a("el-table-column",{attrs:{label:"成果认定",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[null===e.row.col1||""===e.row.col1?a("el-tag",{attrs:{type:"info"}},[t._v(" 待审核 ")]):"通过"===e.row.col1?a("el-tag",{attrs:{type:"success"}},[t._v(" 通过 ")]):a("el-tag",{attrs:{type:"danger"}},[t._v(" 不通过 ")])]}}])}),a("el-table-column",{attrs:{label:"备注",align:"center",prop:"col2"}}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"160","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){return 1!==e.row.tutorId?[a("el-button",{attrs:{type:"success",icon:"el-icon-success",size:"mini",plain:""},on:{click:function(a){return t.checkIn(e.row.worksId,e.$index,3)}}},[t._v("通过 ")]),a("el-button",{attrs:{type:"danger",plain:"",icon:"el-icon-error",size:"mini"},on:{click:function(a){return t.checkOut(e.row.worksId,e.$index,3,e.row.col2)}}},[t._v("驳回 ")])]:void 0}}],null,!0)})],1)],1)],1)],1),a("br"),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:21}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("科研教学奖励")])]),a("el-table",{staticStyle:{width:"100%",margin:"20px auto"},attrs:{data:t.awardList,border:""}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50"}}),a("el-table-column",{attrs:{prop:"awardsName",label:"奖励名称"}}),a("el-table-column",{attrs:{prop:"awardsRank",label:"排名"}}),a("el-table-column",{attrs:{prop:"awardsUnit",label:"颁奖单位"}}),a("el-table-column",{attrs:{prop:"awardsLevel",label:"获奖级别"}}),a("el-table-column",{attrs:{prop:"awardsTime",label:"获奖日期"}}),a("el-table-column",{attrs:{prop:"awardsAuthorName",label:"获奖人姓名"}}),a("el-table-column",{attrs:{label:"证明材料",align:"center",prop:"awardsProveMaterials"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{attrs:{href:e.row.awardsProveMaterials}},[t._v("下载文件")])]}}])}),a("el-table-column",{attrs:{label:"成果认定",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[null===e.row.col1||""===e.row.col1?a("el-tag",{attrs:{type:"info"}},[t._v(" 待审核 ")]):"通过"===e.row.col1?a("el-tag",{attrs:{type:"success"}},[t._v(" 通过 ")]):a("el-tag",{attrs:{type:"danger"}},[t._v(" 不通过 ")])]}}])}),a("el-table-column",{attrs:{label:"备注",align:"center",prop:"col2"}}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"160","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){return 1!==e.row.tutorId?[a("el-button",{attrs:{type:"success",icon:"el-icon-success",size:"mini",plain:""},on:{click:function(a){return t.checkIn(e.row.awardsId,e.$index,4)}}},[t._v("通过 ")]),a("el-button",{attrs:{type:"danger",plain:"",icon:"el-icon-error",size:"mini"},on:{click:function(a){return t.checkOut(e.row.awardsId,e.$index,4,e.row.col2)}}},[t._v("驳回 ")])]:void 0}}],null,!0)})],1)],1)],1)],1),a("br"),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:21}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("发明专利")])]),a("el-table",{staticStyle:{width:"100%",margin:"20px auto"},attrs:{data:t.patentList,border:""}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50"}}),a("el-table-column",{attrs:{prop:"patentName",label:"专利名称"}}),a("el-table-column",{attrs:{prop:"patentAuthorName",label:"第一作者"}}),a("el-table-column",{attrs:{prop:"patentGrantTime",label:"专利授权日期"}}),a("el-table-column",{attrs:{prop:"patentGrantNumber",label:"专利授权号"}}),a("el-table-column",{attrs:{prop:"patentType",label:"专利类型"}}),a("el-table-column",{attrs:{label:"证明材料",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{attrs:{href:e.row.patentProveMaterials}},[t._v("下载文件")])]}}])}),a("el-table-column",{attrs:{label:"成果认定",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[null===e.row.col1||""===e.row.col1?a("el-tag",{attrs:{type:"info"}},[t._v(" 待审核 ")]):"通过"===e.row.col1?a("el-tag",{attrs:{type:"success"}},[t._v(" 通过 ")]):a("el-tag",{attrs:{type:"danger"}},[t._v(" 不通过 ")])]}}])}),a("el-table-column",{attrs:{label:"备注",align:"center",prop:"col2"}}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"160","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){return 1!==e.row.tutorId?[a("el-button",{attrs:{type:"success",icon:"el-icon-success",size:"mini",plain:""},on:{click:function(a){return t.checkIn(e.row.patentId,e.$index,5)}}},[t._v("通过 ")]),a("el-button",{attrs:{type:"danger",plain:"",icon:"el-icon-error",size:"mini"},on:{click:function(a){return t.checkOut(e.row.patentId,e.$index,5,e.row.col2)}}},[t._v("驳回 ")])]:void 0}}],null,!0)})],1)],1)],1)],1),a("br"),a("br"),a("el-row",{attrs:{type:"flex",justify:"end"}},[a("el-col",{attrs:{span:4,offset:21}},[a("el-button",{attrs:{type:"primary"},on:{click:t.submitPass}},[t._v("确认提交")])],1)],1),a("br"),a("br"),a("el-dialog",{attrs:{title:"备注",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"请输入驳回理由(可以为空)"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:6}},model:{value:t.reject.col2,callback:function(e){t.$set(t.reject,"col2",e)},expression:"reject.col2"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.rejectConfirm}},[t._v("确 定")])],1)],1)],1)},r=[],o=(a("a9e3"),a("b0c0"),a("159b"),a("4de4"),a("99af"),a("b775")),c=a("99b1");function n(t,e){return Object(o["a"])({url:c["a"]+"/admin/science/init/".concat(t,"/").concat(e),method:"get"})}function s(t,e,a,l){return Object(o["a"])({url:c["a"]+"/admin/science/check/".concat(t,"/").concat(e,"/").concat(a),method:"post",data:l})}function i(t,e,a,l){return Object(o["a"])({url:c["a"]+"/admin/science/commitMaterial/".concat(t,"/").concat(a,"/").concat(l),method:"post",data:e})}var u={props:{science:Number},data:function(){return{reject:{id:"",index:-1,col2:"",type:-1},rejectList:[],applyId:"",tutorId:"",name:"",organizationName:"",dialogVisible:!1,paperList:[],projectList:[],workList:[],awardList:[],patentList:[]}},created:function(){this.tutorId=this.$route.query.tutorId,this.applyId=this.$route.query.applyId,this.init()},methods:{init:function(){var t=this;n(this.tutorId,this.applyId).then((function(e){t.paperList=e.data.paperList,t.projectList=e.data.projectList,t.workList=e.data.workList,t.awardList=e.data.awardList,t.patentList=e.data.patentList,t.name=e.data.name,t.tutorId=e.data.tutorId,t.organizationName=e.data.organizationName}))},checkIn:function(t,e,a){var l=this;s(t,a,1,{}).then((function(t){if(2e4===t.code){switch(a){case 1:l.paperList[e].col1="通过",l.paperList[e].col2="";break;case 2:l.projectList[e].col1="通过",l.projectList[e].col2="";break;case 3:l.workList[e].col1="通过",l.workList[e].col2="";break;case 4:l.awardList[e].col1="通过",l.awardList[e].col2="";break;case 5:l.patentList[e].col1="通过",l.patentList[e].col2="";break}l.$message.success("审核成功！")}else l.$message.error("网络出现问题，请稍后再试！")}))},checkOut:function(t,e,a,l){this.reject.id=t,this.reject.index=e,this.reject.type=a,this.reject.col2=l,this.dialogVisible=!0},rejectConfirm:function(){var t=this;s(this.reject.id,this.reject.type,2,{col2:this.reject.col2}).then((function(e){var a=t.reject.index;if(2e4===e.code){switch(t.reject.type){case 1:t.paperList[a].col1="不通过",t.paperList[a].col2=t.reject.col2;break;case 2:t.projectList[a].col1="不通过",t.projectList[a].col2=t.reject.col2;break;case 3:t.workList[a].col1="不通过",t.workList[a].col2=t.reject.col2;break;case 4:t.awardList[a].col1="不通过",t.awardList[a].col2=t.reject.col2;break;case 5:t.patentList[a].col1="不通过",t.patentList[a].col2=t.reject.col2;break}t.$message.success("审核成功！"),t.reject.col2="",t.dialogVisible=!1}else t.$message.error("网络出现问题，请稍后再试！")}))},submitPass:function(){var t=this;this.$confirm("确认提交?","提示").then((function(){if(!t.calculationCheck())return t.rejectList=[],void t.$message.warning("材料审核未完成！");var e="",a=1;0!==t.rejectList.length&&(e=t.getCommitSocial(),a=2),i(t.applyId,{commitSocial:e},a,t.science).then((function(e){2e4===e.code&&(t.$message.success("材料审核完成"),t.rejectList=[],t.goBack())}))})).catch((function(){console.log("cancel")}))},calculationCheck:function(){var t=this,e=!0;return this.paperList.forEach((function(a){if(""===a.col1||null===a.col1||"待审核"===a.col1)return e=!1,!1;"不通过"===a.col1&&t.addRejectItem(1,a.paperName,a.col2)})),!!e&&(this.projectList.forEach((function(a){if(""===a.col1||null===a.col1||"待审核"===a.col1)return e=!1,!1;"不通过"===a.col1&&t.addRejectItem(2,a.projectName,a.col2)})),!!e&&(this.workList.forEach((function(a){if(""===a.col1||null===a.col1||"待审核"===a.col1)return e=!1,!1;"不通过"===a.col1&&t.addRejectItem(3,a.worksName,a.col2)})),!!e&&(this.awardList.forEach((function(a){if(""===a.col1||null===a.col1||"待审核"===a.col1)return e=!1,!1;"不通过"===a.col1&&t.addRejectItem(4,a.awardsName,a.col2)})),!!e&&(this.patentList.forEach((function(a){if(""===a.col1||null===a.col1||"待审核"===a.col1)return e=!1,!1;"不通过"===a.col1&&t.addRejectItem(5,a.patentName,a.col2)})),e))))},getCommitSocial:function(){var t="",e=this.rejectList.filter((function(t){return 1===t.type}));0!==e.length&&(t+="学术论文：\n",e.forEach((function(e,a){t+="论文".concat(a+1,": ").concat(e.name,", 驳回原因: ").concat(e.col2," \n")})));var a=this.rejectList.filter((function(t){return 2===t.type}));0!==a.length&&(t+="\n科研项目：\n",a.forEach((function(e,a){t+="项目".concat(a+1,": ").concat(e.name,", 驳回原因: ").concat(e.col2," \n")})));var l=this.rejectList.filter((function(t){return 3===t.type}));0!==l.length&&(t+="\n教材或学术著作\n",l.forEach((function(e,a){t+="著作".concat(a+1,": ").concat(e.name,", 驳回原因: ").concat(e.col2," \n")})));var r=this.rejectList.filter((function(t){return 4===t.type}));0!==r.length&&(t+="\n科研教学奖励\n",r.forEach((function(e,a){t+="奖励".concat(a+1,": ").concat(e.name,", 驳回原因: ").concat(e.col2," \n")})));var o=this.rejectList.filter((function(t){return 5===t.type}));return 0!==o.length&&(t+="\n发明专利\n",o.forEach((function(e,a){t+="专利".concat(a+1,": ").concat(e.name,", 驳回原因: ").concat(e.col2," \n")}))),t},addRejectItem:function(t,e,a){var l={type:Number,name:String,col2:String};l.type=t,l.name=e,l.col2=a,this.rejectList.push(l)},goBack:function(){var t="";t=1===this.science?"/social/socialScienceCheck":"/research/researchCheck",this.$router.push({path:t,query:{applyId:this.applyId}})}}},p=u,d=(a("aafc"),a("2877")),b=Object(d["a"])(p,l,r,!1,null,"1ff55bff",null);e["a"]=b.exports},aafc:function(t,e,a){"use strict";a("b921")},b921:function(t,e,a){}}]);