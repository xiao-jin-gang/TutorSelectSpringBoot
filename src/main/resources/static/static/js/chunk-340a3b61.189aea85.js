(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-340a3b61"],{"48a7":function(e,t,a){},"6ae3":function(e,t,a){"use strict";a("48a7")},d6a8:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"main",attrs:{"element-loading-text":"请稍等..."}},[a("el-row",[a("el-col",{attrs:{span:8,offset:8}},[a("el-steps",{attrs:{active:e.active,"finish-status":"success"}},[a("el-step",{attrs:{title:"基本信息"}}),a("el-step",{attrs:{title:"研究信息"}})],1)],1)],1),a("br"),e.formVisible.first?a("el-row",[a("el-col",{attrs:{span:18,offset:3}},[a("transition",{attrs:{name:"el-fade-in-linear"}},[a("First",{attrs:{"apply-id":e.applyId,"apply-type":e.applyType,"apply-condition":e.applyCondition},on:{func:e.getFormSecond,load:function(t){e.loading=!0}}})],1)],1)],1):e._e(),a("el-row",[a("el-col",{attrs:{span:18,offset:3}},[a("transition",{attrs:{name:"el-fade-in-linear"}},[e.formVisible.second?a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("h2",[e._v("研究信息")])]),e.formVisible.second?a("el-form",{ref:"formSecond",attrs:{model:e.formSecond,"label-width":"100px","label-position":"top"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"申请学科",rules:{required:!0}}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.formSecond.applySubject,callback:function(t){e.$set(e.formSecond,"applySubject",t)},expression:"formSecond.applySubject"}},e._l(e.applySubjects,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"申请类别负责单位："}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:e.setChildProfessional},model:{value:e.formSecond.professionalApplicationSubjectUnit,callback:function(t){e.$set(e.formSecond,"professionalApplicationSubjectUnit",t)},expression:"\n                          formSecond.professionalApplicationSubjectUnit\n                        "}},e._l(e.professionalMasterDiscipline,(function(e){return a("el-option",{key:e.department,staticStyle:{color:"#606266","font-weight":"normal"},attrs:{label:e.department,value:e}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"申请类别代码及名称"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:e.setChildDomain},model:{value:e.formSecond.professionalApplicationSubjectCodeName,callback:function(t){e.$set(e.formSecond,"professionalApplicationSubjectCodeName",t)},expression:"\n                          formSecond.professionalApplicationSubjectCodeName\n                        "}},e._l(e.childProfessional,(function(e){return a("el-option",{key:e.code,staticStyle:{color:"#606266","font-weight":"normal"},attrs:{label:e.code+" "+e.professionalDegreeCategory,value:e}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[e.isDomain?a("el-form-item",{attrs:{label:"申请领域代码及名称"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.formSecond.professionalFieldCodeName,callback:function(t){e.$set(e.formSecond,"professionalFieldCodeName",t)},expression:"formSecond.professionalFieldCodeName"}},e._l(e.childDomain,(function(e){return a("el-option",{key:e.domainCode,attrs:{label:e.domainCode+" "+e.domainName,value:e.domainCode+" "+e.domainName}})})),1)],1):e._e()],1)],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"主要研究方向的内容及其意义（500字以内）"}},[a("el-input",{attrs:{type:"textarea",maxlength:"500","show-word-limit":"",autosize:{minRows:6}},model:{value:e.formSecond.researchDirections,callback:function(t){e.$set(e.formSecond,"researchDirections",t)},expression:"formSecond.researchDirections"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"免审条件（500字以内"}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{name:"material",action:e.getUrl(7),"file-list":e.fileList,"on-success":e.uploadSuccessFunc,"on-error":e.uploadErrorFunc,"before-upload":e.checkFileType,"before-remove":e.beforeRemove,"on-remove":e.removeFile,"on-exceed":e.oversizeFile,limit:1,accept:".zip , .rar"}},[a("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("上传免审资料 ")]),e._v(" 上传资料仅支持.rar/.zip文件 ")],1),a("el-input",{attrs:{type:"textarea",maxlength:"500","show-word-limit":"",placeholder:"免审条件填写",autosize:{minRows:6}},model:{value:e.formSecond.exemptionConditions,callback:function(t){e.$set(e.formSecond,"exemptionConditions",t)},expression:"formSecond.exemptionConditions"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"always"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"font-size":"18px"}},[e._v("科研项目（近五年）")]),a("el-button",{staticClass:"addButton",staticStyle:{float:"right"},attrs:{type:"primary",plain:""},on:{click:function(t){e.dialogSecond1=!0}}},[e._v("添加")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.formSecond.researchProjects,border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),a("el-table-column",{attrs:{prop:"projectName",label:"项目名称"}}),a("el-table-column",{attrs:{prop:"approvalNumber",label:"批准号"}}),a("el-table-column",{attrs:{prop:"projectChargeName",label:"负责人姓名","min-width":"100px"}}),a("el-table-column",{attrs:{prop:"projectStartTime",label:"开始日期"}}),a("el-table-column",{attrs:{prop:"projectEndTime",label:"结束日期"}}),a("el-table-column",{attrs:{prop:"projectCategory",label:"项目分类"}}),a("el-table-column",{attrs:{prop:"projectTotalPrice","min-width":"110px",label:"总经费(万元)"}}),a("el-table-column",{attrs:{prop:"projectLevel",label:"项目级别"}}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"info",plain:""},on:{click:function(a){return e.editResearchProject(t.$index,t.row)}}},[e._v("编 辑")]),a("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(a){return e.delResearchProject(t.$index)}}},[e._v("删 除")])]}}],null,!1,3971672785)})],1)],1)],1),a("br"),a("el-col",{attrs:{span:24}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"always"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"font-size":"18px"}},[e._v("科研教学奖励（近五年）")]),a("el-button",{staticClass:"addButton",staticStyle:{float:"right"},attrs:{type:"primary",plain:""},on:{click:function(t){e.dialogSecond2=!0}}},[e._v("添加")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.formSecond.teachingAwards,border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50px"}}),a("el-table-column",{attrs:{prop:"awardsName",label:"奖励名称"}}),a("el-table-column",{attrs:{prop:"awardsRank",label:"排名"}}),a("el-table-column",{attrs:{prop:"awardsUnit",label:"颁奖单位"}}),a("el-table-column",{attrs:{prop:"awardsLevel",label:"获奖级别"}}),a("el-table-column",{attrs:{prop:"awardsTime",label:"获奖日期"}}),a("el-table-column",{attrs:{prop:"awardsAuthorName",label:"获奖人姓名"}}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"info",plain:""},on:{click:function(a){return e.editTeachingAward(t.$index,t.row)}}},[e._v("编 辑")]),a("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(a){return e.delTeachingAward(t.$index)}}},[e._v("删 除")])]}}],null,!1,4232315153)})],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{offset:8}},[a("el-form-item",{staticStyle:{"margin-top":"20px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmitSecondPage}},[e._v("填写完成，提交申请")])],1)],1)],1)],1):e._e()],1):e._e()],1)],1)],1),a("el-dialog",{attrs:{title:e.isEdit?"编辑科研项目":"添加科研项目",width:"40%",visible:e.dialogSecond1},on:{"update:visible":function(t){e.dialogSecond1=t}}},[a("el-form",{attrs:{model:e.researchProject}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"项目名称"}},[a("el-input",{model:{value:e.researchProject.projectName,callback:function(t){e.$set(e.researchProject,"projectName",t)},expression:"researchProject.projectName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"批准号"}},[a("el-input",{model:{value:e.researchProject.approvalNumber,callback:function(t){e.$set(e.researchProject,"approvalNumber",t)},expression:"researchProject.approvalNumber"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"负责人姓名"}},[a("el-input",{model:{value:e.researchProject.projectChargeName,callback:function(t){e.$set(e.researchProject,"projectChargeName",t)},expression:"researchProject.projectChargeName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"开始日期"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"month",format:"yyyy-MM","value-format":"yyyy-MM",placeholder:"选择日期"},model:{value:e.researchProject.projectStartTime,callback:function(t){e.$set(e.researchProject,"projectStartTime",t)},expression:"researchProject.projectStartTime"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"结束日期"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"month",format:"yyyy-MM","value-format":"yyyy-MM",placeholder:"选择日期"},model:{value:e.researchProject.projectEndTime,callback:function(t){e.$set(e.researchProject,"projectEndTime",t)},expression:"researchProject.projectEndTime"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"项目分类"}},[a("el-input",{attrs:{placeholder:"国家自然科学基金等"},model:{value:e.researchProject.projectCategory,callback:function(t){e.$set(e.researchProject,"projectCategory",t)},expression:"researchProject.projectCategory"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"总经费（万元）"}},[a("el-input",{attrs:{type:"number",percesion:2,step:.01,placeholder:"0.00"},model:{value:e.researchProject.projectTotalPrice,callback:function(t){e.$set(e.researchProject,"projectTotalPrice",t)},expression:"researchProject.projectTotalPrice"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"项目级别"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.researchProject.projectLevel,callback:function(t){e.$set(e.researchProject,"projectLevel",t)},expression:"researchProject.projectLevel"}},[a("el-option",{attrs:{label:"国家级",value:"国家级"}}),a("el-option",{attrs:{label:"省部级",value:"省部级"}}),a("el-option",{attrs:{label:"厅局级",value:"厅局级"}})],1)],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogSecond1=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addResearchProject}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:e.isEdit?"编辑科研教学奖励":"添加科研教学奖励",width:"40%",visible:e.dialogSecond2},on:{"update:visible":function(t){e.dialogSecond2=t}}},[a("el-form",{attrs:{model:e.teachingAward}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"奖励名称"}},[a("el-input",{model:{value:e.teachingAward.awardsName,callback:function(t){e.$set(e.teachingAward,"awardsName",t)},expression:"teachingAward.awardsName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"排名"}},[a("el-input",{attrs:{type:"number",placeholder:"请输入数字",step:1,min:1},model:{value:e.teachingAward.awardsRank,callback:function(t){e.$set(e.teachingAward,"awardsRank",t)},expression:"teachingAward.awardsRank"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"颁奖单位"}},[a("el-input",{model:{value:e.teachingAward.awardsUnit,callback:function(t){e.$set(e.teachingAward,"awardsUnit",t)},expression:"teachingAward.awardsUnit"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"获奖日期"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"month",format:"yyyy-MM","value-format":"yyyy-MM",placeholder:"选择日期"},model:{value:e.teachingAward.awardsTime,callback:function(t){e.$set(e.teachingAward,"awardsTime",t)},expression:"teachingAward.awardsTime"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"获奖人姓名"}},[a("el-input",{model:{value:e.teachingAward.awardsAuthorName,callback:function(t){e.$set(e.teachingAward,"awardsAuthorName",t)},expression:"teachingAward.awardsAuthorName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"获奖级别"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.teachingAward.awardsLevel,callback:function(t){e.$set(e.teachingAward,"awardsLevel",t)},expression:"teachingAward.awardsLevel"}},[a("el-option",{attrs:{label:"国家级",value:"国家级"}}),a("el-option",{attrs:{label:"省部级",value:"省部级"}}),a("el-option",{attrs:{label:"厅局级",value:"厅局级"}})],1)],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogSecond2=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addTeachingAward}},[e._v("确 定")])],1)],1)],1)},r=[],l=(a("99af"),a("b0c0"),a("8a79"),a("a434"),a("25a9")),i=a("99b1"),s=a("2647"),n=a("7b82"),c=a("b384"),d={components:{First:c["a"]},data:function(){return{fileList:[],firstLoading:!0,loading:!1,professionalMasterDiscipline:l["f"],active:0,formVisible:{first:!0,second:!1},isEdit:!1,editIndex:-1,childProfessional:[],childDomain:[],isDomain:!1,dialogSecond1:!1,dialogSecond2:!1,applyCondition:0,applyId:0,applyType:0,formFirst:{},childNodes:[],currentDepartment:"",applySubjects:[{label:"文史",value:1},{label:"理工",value:2},{label:"交叉学科",value:3}],formSecond:{professionalApplicationSubjectUnit:"",professionalApplicationSubjectCodeName:"",professionalFieldCodeName:"",applySubject:"",researchProjects:[],teachingAwards:[]},researchProject:{projectName:"",approvalNumber:"",projectStartTime:"",projectEndTime:"",projectTotalPrice:"",projectLevel:"",projectCategory:"",projectChargeName:""},teachingAward:{awardsName:"",awardsRank:"",awardsUnit:"",awardsTime:"",awardsAuthorName:"",awardsLevel:""}}},created:function(){this.applyId=1*this.$route.params.applyId,this.applyCondition=1*this.$route.params.applyCondition,this.applyType=1*this.$route.params.applyType},methods:{getUrl:function(e){return"".concat(i["a"],"/user/upload/").concat(e)},getFormSecond:function(e,t,a){if(this.applyId=e.applyId,this.formSecond=e,this.applyCondition=a,null!==e.applySubject?this.formSecond.applySubject=1*e.applySubject:this.formSecond.applySubject=null,this.tutorName=t,null!==e.applySubject?this.formSecond.applySubject=1*e.applySubject:this.formSecond.applySubject="",this.formSecond.professionalApplicationSubjectUnit=e.professionalApplicationSubjectUnit,this.formSecond.professionalApplicationSubjectCodeName=e.professionalApplicationSubjectCodeName,this.formSecond.professionalFieldCodeName=e.professionalFieldCodeName,this.formSecond.major=e.major,""!==e.professionalFieldCodeName&&null!=e.professionalFieldCodeName&&(this.isDomain=!0),""!==this.formSecond.exemptionConditionsMaterials&&null!==this.formSecond.exemptionConditionsMaterials){var o=new Object;o.url=this.formSecond.exemptionConditionsMaterials,o.name=this.formSecond.exemptionConditionsMaterials.substring(o.url.lastIndexOf("/")+1,this.formSecond.exemptionConditionsMaterials.length),this.fileList.push(o)}this.formVisible.first=!1,this.formVisible.second=!0,this.loading=!1,this.active=1},oversizeFile:function(e,t){this.$message.warning("上传文件超出限制!")},uploadSuccessFunc:function(e,t,a){var o=new Object;o.url=e.data.path,o.name=o.url.substring(o.url.lastIndexOf("/")+1,o.url.length),this.fileList.push(o),this.formSecond.exemptionConditionsMaterials=e.data.path,this.$message.success("文件上传成功！")},uploadErrorFunc:function(e,t,a){this.$message.error("文件上传失败！")},checkFileType:function(e){return!(!e.name.endsWith(".zip")&&!e.name.endsWith(".rar"))||(this.$message.error("请上传 zip/rar 文件"),!1)},beforeRemove:function(){var e=this.$confirm("确定要移除选取的文件吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",beforeClose:function(e,t,a){if("confirm"!=e)return a(),!1;t.$refs["confirm"].$el.onclick=function(e){if(e=e||window.event,0!=e.detail)return a(),!0}}});return e},removeFile:function(){var e=this;Object(s["a"])(this.formSecond.exemptionConditionsMaterials,this.applyId).then((function(t){1200===t.data.code?(e.$message.success("文件删除成功！"),e.formSecond.exemptionConditionsMaterials="",e.fileList=[]):e.$message.error("文件删除失败！")}))},setChildProfessional:function(e){this.formSecond.professionalApplicationSubjectCodeName="",this.formSecond.professionalFieldCodeName="",this.isDomain=!1,this.formSecond.professionalApplicationSubjectUnit=e.department,this.childProfessional=e.professional,this.childDomain=[]},setChildDomain:function(e){this.formSecond.professionalFieldCodeName="",this.formSecond.professionalApplicationSubjectCodeName=e.code+" "+e.professionalDegreeCategory,this.childDomain=e.domain,0!==e.domain.length?(this.isDomain=!0,this.childDomain=e.domain):this.isDomain=!1},addResearchProject:function(){this.isEdit?(this.formSecond.researchProjects[this.editIndex]=this.researchProject,this.editIndex=-1,this.isEdit=!1):this.formSecond.researchProjects.push(this.researchProject),this.dialogSecond1=!1,this.researchProject={projectName:"",approvalNumber:"",projectStartTime:"",projectEndTime:"",projectTotalPrice:"",projectLevel:"",projectCategory:"",projectChargeName:""}},editResearchProject:function(e,t){this.isEdit=!0,this.editIndex=e,this.dialogSecond1=!0,this.researchProject=this.formSecond.researchProjects[e]},delResearchProject:function(e){this.formSecond.researchProjects.splice(e,1)},addTeachingAward:function(){this.isEdit?(this.formSecond.teachingAwards[this.editIndex]=this.teachingAward,this.editIndex=-1,this.isEdit=!1):this.formSecond.teachingAwards.push(this.teachingAward),this.teachingAward={awardsName:"",awardsRank:"",awardsUnit:"",awardsTime:"",awardsAuthorName:"",awardsLevel:""},this.dialogSecond2=!1},editTeachingAward:function(e,t){this.isEdit=!0,this.editIndex=e,this.teachingAward=this.formSecond.teachingAwards[e],this.dialogSecond2=!0},delTeachingAward:function(e){this.formSecond.teachingAwards.splice(e,1)},setChildNode:function(e){this.formSecond.doctoralMasterSubjectCodeName="",this.formSecond.appliedSubjectUnit=e.department,this.childNodes=e.professional},onSubmitSecondPage:function(){var e=this;""!==this.formSecond.applySubject&&null!==this.formSecond.applySubject?this.$confirm("提交填写?").then((function(){e.loading=!0,Object(n["c"])(e.formSecond,e.applyId).then((function(t){1201===t.data.code&&e.$message.error(t.data.message),e.$alert("填写成功，请前往我的申请页面查看填写信息，并提交至院系审核",{showClose:!1}).then((function(){e.$message.success("填写成功"),e.$router.push("/myApply")}))}))})).catch((function(){console.log("cancel")})):this.$message.warning("请填写申请学科信息")}}},p=d,m=(a("6ae3"),a("2877")),u=Object(m["a"])(p,o,r,!1,null,null,null);t["default"]=u.exports}}]);